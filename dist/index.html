<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="css/style.css">
        <title>鎰威科技前端面試考題</title>
    </head>
    <!-- h1 32px -->
    <!-- h2 28px -->
    <!-- btn 18px -->
    <body>
        <div id="app" class="container wrapper">
            <div class="header">
                <!-- 白色海浪 -->
                <div class="whiteWaves">
                    <img src="./img/whiteWaves1.png" alt="whiteWaves1">
                    <img src="./img/whiteWaves2.png" alt="whiteWaves2">
                    <img src="./img/whiteWaves3.svg" alt="whiteWaves3">
                </div>
                <div class="top">

                    <!-- 標題 -->
                    <div class="top_title">
                        <h1>There is no one</h1>
                        <h2>who loves pain</h2>
                    </div>

                    <!-- 按鈕 -->
                    <div class="top_btn">
                        <button class="default btn" @click="fromMove">
                            <p>FORM</p>
                        </button>
                    </div>

                    <!-- 內文 -->
                    <div class="top_Paragraph">
                        <div class="section">
                            <div class="title">
                                <!-- 仙人掌 -->
                                <img src="./img/cactus.png" alt="cactus">
                                <p class="font18">paragraph</p>
                                <!-- 仙人掌 -->
                                <img src="./img/cactus.png" alt="cactus">
                            </div>
                            <ol class="orderList">
                                <li>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</li>
                            </ol>
                        </div>

                        <div class="section">
                            <div class="title">
                                <!-- 仙人掌 -->
                                <img src="./img/cactus.png" alt="cactus">
                                <p class="font18">paragraph</p>
                                <!-- 仙人掌 -->
                                <img src="./img/cactus.png" alt="cactus">
                            </div>
                            <ol class="orderList">
                                <li>Quisque sodales leo <span>vitae vulputate auctor.</span></li>
                                <li>Proin ac justo ut nisl tincidunt imperdiet.Maecenas viverra libero a
                                    pellentesque blandit.</li>
                                <li>Cras tristique tellus id leo bibendum, eu dapibus nisl accumsan.</li>
                                <li>Donec ultrices sapien <span>vitae leo venenatis ullamcorper.</span></li>
                            </ol>
                        </div>

                        <!-- 獨木舟 & 泡泡 -->
                        <div class="supBubble">
                            <img src="./img/sup.svg" alt="sup">
                            <img src="./img/Bubble.png" alt="Bubble">
                            <img src="./img/Bubble.png" alt="Bubble">
                            <img src="./img/paddle.png" alt="paddle">
                        </div>

                        <!-- 獨木舟 & 煙火 -->
                        <div class="supFireworks">
                            <img src="./img/sup.png" alt="sup">
                            <img src="./img/fireworks.svg" alt="Fireworks">
                            <img src="./img/paddle.png" alt="paddle">
                        </div>
                    </div>

                </div>
                <div class="theWavesContainer">
                    <div class="theWaves"></div>
                </div>
            </div>

            <article class="main wrapper">

                <!-- 表單 -->
                <div id="from" style='margin-top:-100px; padding-top:100px'></div>
                <div class="form">
                    <div class="title">
                        <p>FORM</p>
                        <img src="./img/turtle.png" alt="turtle">
                    </div>
                    <div class="formCotent">
                        <div class="formList">
                            <p>store</p>
                            <img src="./img/dropDown.png" alt="dropDown">
                            <input
                                id="store"
                                type="text"
                                class="fromItem"
                                list="storelist"
                                placeholder="placeholder text"
                                v-model="inputData.selectedStore"
                                @blur="checkOptions"
                                @input="required"
                                required
                            >
                            <!-- 必填提示 -->
                            <!-- no result -->
                            <span class="error_Msg none">required</span>
                            <span class="error_Msg none">no result</span>
                            <datalist   
                                id="storelist" 
                                class="chooseItem"
                            >
                                <option value="store1">store1</option>
                                <option value="store2">store2</option>
                                <option value="store3">store3</option>
                            </datalist>
                        </div>

                        <div class="formList">
                            <p>name</p>
                            <input
                                type="text"
                                id="fromName"
                                class="fromItem"
                                placeholder="placeholder text"
                                v-model.trim="inputData.name" 
                                @keydown="unNumber($event)"
                                @input="checkName"
                                @stop
                                required
                            />
                            <!-- 必填提示 -->
                            <span class="error_Msg none">required</span>
                            <!-- 錯誤提示 -->
                            <span class="error_Msg none">wrong format</span>
                        </div>

                        <!-- compalate -->
                        <!-- 手機格式 -->
                        <!-- 數字 -->
                        <!-- 10位數 -->
                        <!-- 必填 -->
                        <div class="formList">
                            <p>phone</p>
                            <input
                                type="tel"
                                id="fromPhone"
                                class="fromItem"
                                placeholder="placeholder text"
                                v-model.trim="inputData.phone"
                                maxlength="10"
                                required
                                @keydown="unStr($event)"
                                @input="checkPhone"
                                />
                                <!-- 必填提示 -->
                                <span class="error_Msg none">required</span>
                                <!-- 錯誤提示 -->
                                <span class="error_Msg none">wrong format</span>
                        </div>


                        <!-- compalate -->
                        <!-- 數字 -->
                        <!-- 大於0 -->
                        <!-- 必填 -->
                        <div class="formList">
                            <p>Amount of consumption</p>
                            <input
                                type="number"
                                id="fromAmount"
                                class="fromItem"
                                placeholder="placeholder text"
                                v-model.trim="inputData.amount"
                                @keydown="onlyNumber($event)"
                                @input="checkAmount"
                                required
                            />
                            <!-- 必填提示 -->
                            <span class="error_Msg none">required</span>
                            <!-- 錯誤提示 -->
                            <span class="error_Msg none">wrong format</span>
                        </div>
                        

                        <!-- 必填 -->
                        <div class="formList">
                            <p>payment</p>
                            <img src="./img/dropDown.png" alt="dropDown">
                            <select 
                                id="fromPayment"
                                class="fromItem"
                                v-model="inputData.payment" 
                                @input="checkPayment"
                            >
                                <option value="digital payment" selected>digital payment</option>
                                <option value="ATM">ATM</option>
                            </select>

                            <!-- 必填提示 -->
                            <span class="error_Msg none">required</span>
                            <!-- 錯誤提示 -->
                            <span class="error_Msg none">wrong format</span>
                        </div>
                    </div>
                </div>

                <!-- 預設按鈕 -->
                <div class="main_btn" id="submit">
                    <button 
                            class="default"
                            @click="submitForm"
                            >
                        <p>submit</p>
                    </button>
                </div>

                <!-- 成功按鈕 -->
                <div class="main_btn none" id="success">
                    <button 
                            class="success" 
                            @click="submitForm">
                        <img src="./img/success.png" alt="success">
                        <p>success</p>
                    </button>
                </div>

                <!-- 失敗按鈕 -->
                <div class="main_btn none" id="failure">
                    <button 
                            class="failure"
                            @click="submitForm">
                        <img src="./img/failure.svg" alt="success">
                        <p>failure</p>
                    </button>
                    <p>This person does not exist</p>
                </div>
                

                <!-- 抽獎區 -->
                <div class="raffleArea">
                    <ul class="raffleBlock">
                        
                        <!-- TOP 3 -->
                        <template 
                            v-for="item in raffleDataA"
                            :key="item.id"
                        >
                            <li class="raffleItem">
                                <div class="certificate_ID typeA">
                                    <p>{{item.id}}</p>
                                </div>
                                <p class="raffleName font18">{{item.name}}</p>
                                <div class="mark">
                                    <p>{{item.mark}}</p>
                                </div>
                            </li>
                        </template>

                        <!-- 第三名以後 -->
                        <template 
                            v-for="item in raffleDataB"
                            :key="item.id"
                        >
                            <li class="raffleItem">
                                <div class="certificate_ID typeB">
                                    <p style="padding-bottom: 2px;">{{item.id}}</p>
                                </div>
                                <p class="raffleName" style="color: #A0BCC8">{{item.name}}</p>
                                <div class="mark" style="border: 1px solid #A0BCC8">
                                    <p style="color: #A0BCC8">{{item.mark}}</p>
                                </div>
                            </li>
                        </template>

                    </ul>
                </div>

                <!-- lighthouse -->
                <div class="lighthouse_wrap">
                    <div class="title">
                        <img src="./img/leftLine.png" alt="leftLine">
                        <div class="content">
                            <h6>13.32</h6>
                            <h6>who seeks after it and<br>wants to have it</h6>
                        </div>
                        <img src="./img/rightLine.png" alt="rightLine">
                    </div>
                    <img src="./img/lighthouse.svg" alt="lighthouse">
                </div>
            </article>

            <!-- 商城 -->
            <footer class="shopMall_wrap">
                <h6>Neque porro quisquam<br>est qui dolorem!</h6>
                <img src="./img/market.svg" alt="market">
            </footer>

        </div>

        <script src="./js/vender/Vue/vue.global.js"></script>
        <script src="./js/vender/isJS/is.min.js"></script>
        <script>
        
            const app = Vue.createApp({
                data() {
                    return {

                        // TOP3
                        raffleDataA: [
                            {
                                id: "A",
                                mark: "ONE",
                                name: "dehumidifier"
                            },
                            {
                                id: "B",
                                mark: "ONE",
                                name: "range hood"
                            },
                            {
                                id: "C",
                                mark: "ONE",
                                name: "vacuum cleaner"
                            }
                        ],

                        // 第三名以後
                        raffleDataB: [
                            {
                                id: "D",
                                mark: "ONE",
                                name: "toaster"
                            },
                            {
                                id: "E",
                                mark: "ONE",
                                name: "scale"
                            },
                            {
                                id: "F",
                                mark: "ONE",
                                name: "straightening iron"
                            },
                            {
                                id: "G",
                                mark: "FIVE",
                                name: "vacuum cleaner"
                            },
                            {
                                id: "H",
                                mark: "TEN",
                                name: "rice cooker"
                            }
                        ],
                        
                        // 使用者輸入的 Data
                        inputData: {
                            selectedStore: "",
                            name: "",
                            phone: "",
                            amount: "",
                            payment:"digital payment"
                        },

                        // 表單驗證的 Data
                        submitData: {
                            selectedStore: false,
                            name: false,
                            phone: false,
                            amount: false,
                            payment: true
                        }
                    }
                },
                methods: {

                    // from錨點
                    fromMove(){
                        let target = document.getElementById('from');
                        const formPosition = target.getBoundingClientRect().top + window.pageYOffset;
                        window.scrollTo({
                            top: formPosition,
                            behavior: 'smooth'
                        })
                    },
                    // ========== 驗證格式 ========== // 
                    
                    // 1、store 格式驗證
                    checkOptions(e){
                        let store = document.getElementById('store');
                        if(
                            // 輸入正確
                            this.inputData.selectedStore == "store1" ||
                            this.inputData.selectedStore == "store2" || 
                            this.inputData.selectedStore == "store3" 
                            ){
                            
                            store.classList.remove('error');
                            store.nextElementSibling.classList.add('none');
                            store.nextElementSibling.nextElementSibling.classList.add('none');
                            this.submitData.selectedStore = true;
                            console.log("輸入正確");
                        }
                        else if(
                            !(this.inputData.selectedStore == "store1" ||
                            this.inputData.selectedStore == "store2" || 
                            this.inputData.selectedStore == "store3" )
                        ){
                            store.classList.add('error');
                            store.nextElementSibling.classList.add('none');
                            store.nextElementSibling.nextElementSibling.classList.remove('none');
                            this.submitData.selectedStore = false;
                        }
                    },

                    required (){
                        // 空值輸入 required提示
                        if(this.inputData.selectedStore == ""){
                            store.classList.add('error');
                            store.nextElementSibling.classList.remove('none');
                            store.nextElementSibling.nextElementSibling.classList.add('none');
                            this.submitData.name = false;
                            console.log("空值錯誤");
                        }
                    },

                    // 2、name 格式驗證
                    nameRule(nameStr){
                        let nameRule =  new RegExp('^[\u4e00-\u9fa5]+$|^[a-zA-Z\s]+$');
                        return nameRule.test(nameStr);
                    },

                    // 輸入數字錯誤
                    unNumber(e){
                        let fromName = document.getElementById('fromName');
                        if(
                        (e.which >= 48 && e.which <= 57) || 
                        (e.which > 8 && e.which <=9) || 
                        (e.which >= 96 && e.which < 105)){
                            fromName.classList.add('error');
                            fromName.nextElementSibling.classList.add('none');
                            fromName.nextElementSibling.nextElementSibling.classList.remove('none');
                            this.submitData.name = false;
                        }
                    },

                    checkName(e){
                        let fromName = document.getElementById('fromName');
                        
                        // 輸入正確
                        if(this.nameRule(this.inputData.name)){
                            fromName.classList.remove('error');
                            fromName.nextElementSibling.classList.add('none');
                            this.submitData.name = true;
                            // console.log("輸入正確");
                        }

                        // 空值錯誤 required
                        if(this.inputData.name == ""){
                            fromName.classList.add('error');
                            fromName.nextElementSibling.classList.remove('none');
                            fromName.nextElementSibling.nextElementSibling.classList.add('none');
                            this.submitData.name = false;
                            // console.log("空值錯誤");
                        }
                        
                    },

                    // 3、phone 格式驗證
                    phoneRule(str){
                        let phoneRule =  new RegExp("^09\\d{8}$");
                        return phoneRule.test(str);
                    },

                    // 打數字以外錯誤
                    unStr(e){
                        let fromPhone = document.getElementById('fromPhone');
                        // console.log(e.which);
                        if( 
                        ((e.which >= 37 && e.which <= 40) || 
                        (e.which >= 48 && e.which <= 57) || 
                        (e.which >= 96 && e.which < 105) ||
                        e.which == 9) && fromPhone.value.length !== 10
                        ){
                            console.log(fromPhone.value.length);
                            fromPhone.classList.add('error');
                            fromPhone.nextElementSibling.classList.add('none');
                            fromPhone.nextElementSibling.nextElementSibling.classList.remove('none');
                            this.submitData.name = false;
                            console.log("數字錯誤");
                        }
                        // 回車鍵使長度 == 0 提示 required
                        else if(fromPhone.value.length >= 0 && fromPhone.value.length <= 2){
                            
                            fromPhone.classList.add('error');
                            fromPhone.nextElementSibling.classList.remove('none');
                            fromPhone.nextElementSibling.nextElementSibling.classList.add('none');
                            this.submitData.phone = false;
                        }
                    },
                    checkPhone(){

                        // 字數少於10錯誤
                        let fromPhone = document.getElementById('fromPhone');
                        // 空值錯誤
                        if(this.inputData.phone == ""){
                            fromPhone.classList.add('error');
                            fromPhone.nextElementSibling.classList.remove('none');
                            fromPhone.nextElementSibling.nextElementSibling.classList.add('none');
                            this.submitData.phone = false;
                            // console.log(false);
                            console.log("空值錯誤");
                        }

                        if( this.inputData.phone.length < 10){
                            
                            fromPhone.classList.add('error');
                            fromPhone.nextElementSibling.classList.add('none');
                            fromPhone.nextElementSibling.nextElementSibling.classList.remove('none');
                            this.submitData.phone = false;
                            // console.log(false);
                            console.log("字數少於10錯誤");
                        }
                        // 格式錯誤
                        if(!this.phoneRule(this.inputData.phone)){
                            fromPhone.classList.add('error');
                            fromPhone.nextElementSibling.classList.add('none');
                            fromPhone.nextElementSibling.nextElementSibling.classList.remove('none');
                            this.submitData.phone = false;
                            // console.log(false);
                            console.log("格式錯誤");
                        }else{
                            // 輸入正確
                            fromPhone.classList.remove('error');
                            fromPhone.nextElementSibling.classList.add('none');
                            fromPhone.nextElementSibling.nextElementSibling.classList.add('none');
                            this.submitData.phone = true;
                            // console.log(true);
                            console.log("輸入正確");
                        }
                        
                    },

                    // 4、amount 格式驗證
                    // 不能打數字以外
                    onlyNumber(e){
                        if( (e.which >= 37 && e.which <= 40) || (e.which >= 48 && e.which <= 57) || (e.which >= 8 && e.which <=9) || (e.which >= 96 && e.which < 105)){

                        }else{
                            e.preventDefault();
                        }
                    },

                    checkAmount() {
                        let amount = document.getElementById('fromAmount');
                        if(this.inputData.amount.length == 0 || this.inputData.amount < 0){
                            // 數字小於 或 等於 0 錯誤
                            amount.classList.add('error');
                            amount.nextElementSibling.classList.remove('none');
                            this.submitData.amount = false;
                            // console.log(false);
                        }else{
                            // 驗證通過
                            amount.classList.remove('error');
                            amount.nextElementSibling.classList.add('none');
                            this.submitData.amount = true;
                            // console.log(true);
                        }
                    },

                    // 5、payment 格式驗證
                    checkPayment(){
                        let payment = document.getElementById('fromPayment');
                        if( this.inputData.payment == "digital payment" || this.inputData.payment == "ATM"){
                            // 輸入正確
                            payment.classList.remove('error');
                            payment.nextElementSibling.classList.add('none');
                            this.submitData.payment = true;
                            // console.log(true);
                        }else{
                            // 錯誤
                            payment.classList.add('error');
                            payment.nextElementSibling.classList.remove('none');
                            this.submitData.payment = false;
                            // console.log(false);
                        }
                    },


                    // submit 格式驗證
                    submitForm() {

                        let submit = document.getElementById('submit');
                        let success = document.getElementById('success');
                        let failure = document.getElementById('failure');

                        // console.log(submit);
                        // console.log(success);
                        // console.log(failure);
                        // console.log(`checkOptions ${this.checkOptions}`);
                        // console.log(`checkName ${this.checkName}`);
                        // console.log(`checkPhone ${this.checkPhone}`);
                        // console.log(`checkAmount ${this.checkAmount}`);
                        // console.log(`checkPayment ${this.checkPayment}`);

                        this.checkOptions();
                        this.checkName();
                        this.checkPhone();
                        this.checkAmount();
                        this.checkPayment();

                        if(
                            this.submitData.selectedStore 
                            && this.submitData.name 
                            && this.submitData.phone 
                            && this.submitData.amount 
                            && this.submitData.payment){
                            // console.log("驗證通過");
                            success.classList.remove('none');
                            submit.classList.add('none');
                            failure.classList.add('none');
                        }else{
                            // console.log("驗證未通過");
                            submit.classList.add('none');
                            success.classList.add('none');
                            failure.classList.remove('none');
                        };
                    },


                },

            });
            const vm = app.mount("#app");
        </script>
    </body>
</html>